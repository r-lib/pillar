<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Controlling display of numbers • pillar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Controlling display of numbers">
<meta property="og:description" content="pillar">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pillar</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.5.1.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/pillar-package.html#package-options">Options</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/numbers.html">Controlling display of numbers</a>
    </li>
    <li>
      <a href="../articles/extending.html">Custom formatting</a>
    </li>
    <li>
      <a href="../articles/printing.html">Printing a tibble: Control and data flow</a>
    </li>
    <li>
      <a href="../articles/debugme.html">Printing a tibble: Tracking control flow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/pillar/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="numbers_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Controlling display of numbers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/pillar/blob/master/vignettes/numbers.Rmd" class="external-link"><code>vignettes/numbers.Rmd</code></a></small>
      <div class="hidden name"><code>numbers.Rmd</code></div>

    </div>

    
    
<p>Tibbles print numbers with three significant digits by default, switching to scientific notation if the available space is too small. Underlines are used to highlight groups of three digits. This display works for many, but not for all use cases.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pillar.r-lib.org/">pillar</a></span><span class="op">)</span></code></pre></div>
<div id="showing-num" class="section level2">
<h2 class="hasAnchor">
<a href="#showing-num" class="anchor"></a>Showing <code>num</code>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></code></pre></div>
<div id="example" class="section level3">
<h3 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, notation <span class="op">=</span> <span class="st">"sci"</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num(sci)[5]&gt;</span>
<span class="co">#&gt; [1] -1.00e0  0.      1.00e0  2.00e0  3.00e0</span>

<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>
  x4 <span class="op">=</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">8</span><span class="op">:</span><span class="fl">12</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">+</span> <span class="fl">0.5</span>, digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,
  x1 <span class="op">=</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">8</span><span class="op">:</span><span class="fl">12</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">+</span> <span class="fl">0.5</span>, digits <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>,
  usd <span class="op">=</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">8</span><span class="op">:</span><span class="fl">12</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">+</span> <span class="fl">0.5</span>, digits <span class="op">=</span> <span class="fl">2</span>, label <span class="op">=</span> <span class="st">"USD"</span><span class="op">)</span>,
  percent <span class="op">=</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">8</span><span class="op">:</span><span class="fl">12</span> <span class="op">/</span> <span class="fl">100</span> <span class="op">+</span> <span class="fl">0.0005</span>, label <span class="op">=</span> <span class="st">"%"</span>, scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>,
  eng <span class="op">=</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>, notation <span class="op">=</span> <span class="st">"eng"</span>, fixed_magnitude <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
  si <span class="op">=</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">123</span>, notation <span class="op">=</span> <span class="st">"si"</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 6</span>
<span class="co">#&gt;          x4       x1     usd percent         eng        si</span>
<span class="co">#&gt;   &lt;num:.4!&gt; &lt;num:.1&gt;     USD       %       &lt;eng&gt;      &lt;si&gt;</span>
<span class="co">#&gt; 1  800.5000    800.5  800.50    8.05     1.00e-3   123.00m</span>
<span class="co">#&gt; 2  900.5000    900.5  900.50    9.05    10.00e-3     1.23 </span>
<span class="co">#&gt; 3 1000.5000   1000.5 1000.50   10.0    100.00e-3    12.30 </span>
<span class="co">#&gt; 4 1100.5000   1100.5 1100.50   11.0   1000.00e-3   123.00 </span>
<span class="co">#&gt; 5 1200.5000   1200.5 1200.50   12.0  10000.00e-3     1.23k</span></code></pre></div>
</div>
</div>
<div id="computing-on-num" class="section level2">
<h2 class="hasAnchor">
<a href="#computing-on-num" class="anchor"></a>Computing on <code>num</code>
</h2>
<div id="arithmetics" class="section level3">
<h3 class="hasAnchor">
<a href="#arithmetics" class="anchor"></a>Arithmetics</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span>
<span class="co">#&gt; &lt;tibble_num[1]&gt;</span>
<span class="co">#&gt; [1] 3</span>
<span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num[1]&gt;</span>
<span class="co">#&gt; [1] 3</span>
<span class="fl">1L</span> <span class="op">+</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num[1]&gt;</span>
<span class="co">#&gt; [1] 3</span>
<span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">3.23456</span>, sigfig <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">-</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num:4[1]&gt;</span>
<span class="co">#&gt; [1] 1.235</span>
<span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">4</span>, sigfig <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">3</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num:2[1]&gt;</span>
<span class="co">#&gt; [1] 12</span>
<span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">3</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">4</span>, sigfig <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num:.2![1]&gt;</span>
<span class="co">#&gt; [1] 12</span>
<span class="op">-</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num[1]&gt;</span>
<span class="co">#&gt; [1] -2</span></code></pre></div>
</div>
<div id="mathematics" class="section level3">
<h3 class="hasAnchor">
<a href="#mathematics" class="anchor"></a>Mathematics</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, label <span class="op">=</span> <span class="st">"$"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num{$}[1]&gt;</span>
<span class="co">#&gt; [1] 1</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, notation <span class="op">=</span> <span class="st">"eng"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num(eng)[1]&gt;</span>
<span class="co">#&gt; [1] 2.00e0</span>
<span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, label <span class="op">=</span> <span class="st">"%"</span>, scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num{%}*100[3]&gt;</span>
<span class="co">#&gt; [1] 84.1 90.9 14.1</span></code></pre></div>
</div>
</div>
<div id="integrating-with-other-classes" class="section level2">
<h2 class="hasAnchor">
<a href="#integrating-with-other-classes" class="anchor"></a>Integrating with other classes</h2>
<div id="gt" class="section level3">
<h3 class="hasAnchor">
<a href="#gt" class="anchor"></a>gt</h3>
<ul>
<li>Consumption via new <code>fmt_auto()</code>?</li>
</ul>
<p>FIXME</p>
</div>
<div id="units" class="section level3">
<h3 class="hasAnchor">
<a href="#units" class="anchor"></a>units</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-quantities/units/" class="external-link">units</a></span><span class="op">)</span>
<span class="co">#&gt; udunits database from /usr/share/xml/udunits/udunits2.xml</span>

<span class="va">set_units.tibble_num</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">unclassed</span> <span class="op">&lt;-</span> <span class="va">x</span>
  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">unclassed</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
  <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="va">unclassed</span>, <span class="va">...</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="va">m</span><span class="op">)</span>
<span class="va">km</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="va">km</span><span class="op">)</span>

<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>
  sci_int <span class="op">=</span> <span class="fu"><a href="../reference/num.html">set_num_opts</a></span><span class="op">(</span><span class="va">m</span> <span class="op">+</span> <span class="va">km</span>, notation <span class="op">=</span> <span class="st">"sci"</span><span class="op">)</span>,
  digits_int <span class="op">=</span> <span class="fu"><a href="../reference/num.html">set_num_opts</a></span><span class="op">(</span><span class="va">km</span> <span class="op">+</span> <span class="va">m</span>, digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,
  sci_ext <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">+</span> <span class="fl">0.001</span>, notation <span class="op">=</span> <span class="st">"sci"</span><span class="op">)</span>, <span class="va">km</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   sci_int digits_int sci_ext</span>
<span class="co">#&gt;       [m]       [km]    [km]</span>
<span class="co">#&gt; 1  1.00e3     1.0010  1.00e0</span>
<span class="co">#&gt; 2  2.00e3     2.0020  2.00e0</span>
<span class="co">#&gt; 3  3.00e3     3.0030  3.00e0</span>

<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>
  sci_int <span class="op">=</span> <span class="fu"><a href="../reference/num.html">set_num_opts</a></span><span class="op">(</span><span class="va">m</span>, notation <span class="op">=</span> <span class="st">"sci"</span><span class="op">)</span> <span class="op">+</span> <span class="va">km</span>,
  digits_int <span class="op">=</span> <span class="fu"><a href="../reference/num.html">set_num_opts</a></span><span class="op">(</span><span class="va">km</span>, digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span> <span class="va">m</span>,
  sci_ext <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/units/man/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, notation <span class="op">=</span> <span class="st">"sci"</span><span class="op">)</span>, <span class="va">m</span><span class="op">)</span> <span class="op">+</span> <span class="va">km</span>
<span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   sci_int digits_int sci_ext</span>
<span class="co">#&gt;       [m]       [km]     [m]</span>
<span class="co">#&gt; 1  1.00e3     1.0010  1.00e3</span>
<span class="co">#&gt; 2  2.00e3     2.0020  2.00e3</span>
<span class="co">#&gt; 3  3.00e3     3.0030  3.00e3</span></code></pre></div>
</div>
<div id="formattable" class="section level3">
<h3 class="hasAnchor">
<a href="#formattable" class="anchor"></a>formattable</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://renkun-ken.github.io/formattable/" class="external-link">formattable</a></span><span class="op">)</span>

<span class="va">pillar_shaft.formattable</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">pillar</span><span class="fu">::</span><span class="fu"><a href="../reference/new_pillar_shaft.html">new_pillar_shaft_simple</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, align <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">pillar_shaft.formattable_currency</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">formattable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"formattable"</span><span class="op">)</span>

  <span class="fu"><a href="../reference/pillar_shaft.html">pillar_shaft</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, digits <span class="op">=</span> <span class="va">formattable</span><span class="op">$</span><span class="va">digits</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">pillar_shaft.formattable_percent</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">formattable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"formattable"</span><span class="op">)</span>

  <span class="fu"><a href="../reference/pillar_shaft.html">pillar_shaft</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, digits <span class="op">=</span> <span class="va">formattable</span><span class="op">$</span><span class="va">digits</span>, label <span class="op">=</span> <span class="st">"%"</span>, scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">pillar_shaft.formattable_scientific</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/pillar_shaft.html">pillar_shaft</a></span><span class="op">(</span><span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">unclass</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, notation <span class="op">=</span> <span class="st">"sci"</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

<span class="va">type_sum.formattable</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">formattable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"formattable"</span><span class="op">)</span>

  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"formattable_currency"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"^formattable_"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"formattable_percent"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="st">"%"</span><span class="op">)</span>
  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/base/abbreviate.html" class="external-link">abbreviate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">sub</a></span><span class="op">(</span><span class="st">"^formattable_"</span>, <span class="st">""</span>, <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="fl">4</span><span class="op">)</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="fu"><a href="https://renkun-ken.github.io/formattable/reference/num_currency.html" class="external-link">num_currency</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">+</span> <span class="fl">0.1</span><span class="op">)</span>
<span class="co">#&gt; [1] $100.10 $200.10 $300.10</span>
<span class="fu"><a href="https://renkun-ken.github.io/formattable/reference/num_percent.html" class="external-link">num_percent</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span> <span class="fl">0.1</span> <span class="op">+</span> <span class="fl">0.001</span><span class="op">)</span>
<span class="co">#&gt; [1] 10.10% 20.10% 30.10%</span>
<span class="fu"><a href="https://renkun-ken.github.io/formattable/reference/num_scientific.html" class="external-link">num_scientific</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span> <span class="fl">0.1</span> <span class="op">+</span> <span class="fl">0.001</span><span class="op">)</span>
<span class="co">#&gt; [1] 1.0100e-01 2.0100e-01 3.0100e-01</span>

<span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>
  currency <span class="op">=</span> <span class="fu"><a href="https://renkun-ken.github.io/formattable/reference/num_currency.html" class="external-link">num_currency</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span> <span class="fl">100</span> <span class="op">+</span> <span class="fl">0.1</span><span class="op">)</span>,
  percent <span class="op">=</span> <span class="fu"><a href="https://renkun-ken.github.io/formattable/reference/num_percent.html" class="external-link">num_percent</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span> <span class="fl">0.1</span> <span class="op">+</span> <span class="fl">0.001</span><span class="op">)</span>,
  scientific <span class="op">=</span> <span class="fu"><a href="https://renkun-ken.github.io/formattable/reference/num_scientific.html" class="external-link">num_scientific</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span> <span class="op">*</span> <span class="fl">0.1</span> <span class="op">+</span> <span class="fl">0.001</span><span class="op">)</span>
<span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   currency percent scientific</span>
<span class="co">#&gt;          $       %     &lt;scnt&gt;</span>
<span class="co">#&gt; 1     100.    10.1    1.01e-1</span>
<span class="co">#&gt; 2     200.    20.1    2.01e-1</span>
<span class="co">#&gt; 3     300.    30.1    3.01e-1</span></code></pre></div>
</div>
<div id="scales" class="section level3">
<h3 class="hasAnchor">
<a href="#scales" class="anchor"></a>scales</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'scales'</span>
<span class="co">#&gt; The following objects are masked from 'package:formattable':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     comma, percent, scientific</span>

<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/num.html">num</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span> <span class="op">/</span> <span class="fl">100</span>, label <span class="op">=</span> <span class="st">"%"</span>, scale <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>

<span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/oob.html" class="external-link">squish</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; &lt;tibble_num{%}*100[10]&gt;</span>
<span class="co">#&gt;  [1]  1   2   3   4   5   6   7.  8   9  10</span>

<span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span>
<span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>
<span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0L</span>
<span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span>

<span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/cscale.html" class="external-link">cscale</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/rescale_pal.html" class="external-link">rescale_pal</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Error in UseMethod("rescale"): no applicable method for 'rescale' applied to an object of class "c('tibble_num', 'vctrs_vctr', 'double')"</span></code></pre></div>
</div>
<div id="ggplot2" class="section level3">
<h3 class="hasAnchor">
<a href="#ggplot2" class="anchor"></a>ggplot2</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>

<span class="va">scale_type.tibble_num</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span>
  <span class="st">"continuous"</span>
<span class="op">}</span>

<span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="numbers_files/figure-html/numbers-19-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://krlmlr.info" class="external-link external-link">Kirill Müller</a>, <a href="http://hadley.nz" class="external-link external-link">Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
